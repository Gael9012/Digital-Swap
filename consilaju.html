<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- Meta tags SEO -->
  <meta name="description" content="Catálogo de consolas de videojuegos en Digital Swap: encuentra las mejores consolas como PlayStation 5, Xbox Series X, Nintendo Switch, Steam Deck y más. Envío gratis y garantía.">
  <meta name="keywords" content="consolas, videojuegos, PlayStation 5, Xbox Series X, Nintendo Switch, Steam Deck, Digital Swap, gaming, PS5, Xbox, Nintendo">
  <meta name="author" content="Digital Swap">
  <meta name="robots" content="index, follow">
  <meta name="theme-color" content="#3b82f6">
  
  <!-- Open Graph tags -->
  <meta property="og:title" content="Consolas de Videojuegos - Digital Swap">
  <meta property="og:description" content="Catálogo de consolas de videojuegos en Digital Swap: PlayStation 5, Xbox Series X, Nintendo Switch y más.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://digitalswap.com/consolas">
  
  <title>Consolas de Videojuegos - Digital Swap</title>
  
  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="logo.png">
  
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
    body {
      background-image: url('https://img.freepik.com/vector-premium/fondo-vector-monocromo-blanco-abstracto-folleto-diseno-folleto-sitio-web-fondo-pantalla-blanco-geometrico-pagina-inicio-presentacion-certificado_249611-5879.jpg');
      background-size: cover;
      background-repeat: no-repeat;
      background-attachment: fixed;
    }
    
    .product-card {
      transition: transform 0.2s, box-shadow 0.2s;
    }
    
    .product-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(0,0,0,0.15);
    }
    
    .filter-active {
      background-color: #3b82f6 !important;
      color: white !important;
    }
    
    .price-badge {
      position: absolute;
      top: 10px;
      right: 10px;
      background: linear-gradient(45deg, #ef4444, #dc2626);
      color: white;
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 10px;
      font-weight: bold;
      z-index: 10;
    }
    
    .wishlist-btn {
      position: absolute;
      top: 10px;
      left: 10px;
      background: rgba(255,255,255,0.9);
      border: none;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s;
      z-index: 10;
    }
    
    .wishlist-btn:hover {
      background: #ef4444;
      color: white;
    }
    
    .wishlist-btn.active {
      background: #ef4444;
      color: white;
    }

    .product-card.selected {
      border: 2px solid #3b82f6;
      box-shadow: 0 0 0 1px #3b82f6;
    }

    .select-checkbox {
      position: absolute;
      top: 10px;
      right: 50px;
      width: 20px;
      height: 20px;
      z-index: 15;
      cursor: pointer;
      accent-color: #3b82f6;
    }

    .line-clamp-2 {
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .notification {
      animation: slideIn 0.3s ease-out;
    }

    @keyframes slideIn {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }
  </style>
</head>

<body class="bg-gray-100 font-sans">


  <!-- Header con navegación -->
  <header class="bg-gradient-to-r from-blue-600 to-purple-600 py-6 shadow-lg" role="banner">
    <div class="max-w-7xl mx-auto px-4 py-4">
      <div class="flex items-center justify-between">
        <!-- Logo y título -->
        <div class="flex items-center space-x-4">
          <img src="logo.png" alt="Digital Swap Logo" class="h-12 w-auto" loading="lazy">
          <h1 class="text-2xl font-bold text-white">Digital Swap</h1>
        </div>
        
       
        <!-- Carrito y favoritos -->
        <div class="flex items-center space-x-4">
          <!-- Favoritos -->
          <button id="wishlistBtn" class="relative p-2 text-white hover:text-red-200 transition-colors" onclick="showWishlist()">
            <i class="fas fa-heart"></i>
            <span id="wishlistCount" class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center hidden">0</span>
          </button>
          
          <!-- Carrito -->
          <button id="cartBtn" class="relative p-2 text-white hover:text-blue-200 transition-colors" onclick="showCart()">
            <i class="fas fa-shopping-cart"></i>
            <span id="cartCount" class="absolute -top-1 -right-1 bg-blue-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center hidden">0</span>
          </button>
          
          <!-- Menú móvil -->
          <button id="mobileMenuBtn" class="md:hidden p-2 text-white hover:text-blue-200 transition-colors">
            <i class="fas fa-bars"></i>
          </button>
        </div>
      </div>
      
      <!-- Menú móvil -->
      <div id="mobileMenu" class="md:hidden hidden mt-4 pt-4 border-t border-gray-200">
        <nav class="flex flex-col space-y-3">
          <a href="index.html" class="text-gray-600 hover:text-blue-600 transition-colors">
            <i class="fas fa-home mr-2"></i>Inicio
          </a>
          <a href="productos.html" class="text-gray-600 hover:text-blue-600 transition-colors">
            <i class="fas fa-shopping-bag mr-2"></i>Productos
          </a>
          <a href="catalogo.html" class="text-gray-600 hover:text-blue-600 transition-colors">
            <i class="fas fa-gamepad mr-2"></i>Juegos
          </a>
          <a href="audifonos.html" class="text-gray-600 hover:text-blue-600 transition-colors">
            <i class="fas fa-headphones mr-2"></i>Audífonos
          </a>
          <a href="Smartwat.html" class="text-gray-600 hover:text-blue-600 transition-colors">
            <i class="fas fa-watch mr-2"></i>Smartwatches
          </a>
        </nav>
      </div>
    </div>
  </header>

  <div class="max-w-7xl mx-auto py-8 px-4">


    <div class="flex flex-col lg:flex-row gap-6">
      <!-- Sidebar filtros -->
      <aside class="lg:w-64 bg-white rounded-lg shadow p-4 h-fit">
        <div class="flex items-center justify-between mb-4">
          <h2 class="text-lg font-semibold">Filtros</h2>
          <button id="clearFilters" class="text-sm text-blue-600 hover:text-blue-800">Limpiar</button>
        </div>

        <div class="mb-6">
          <h3 class="font-medium mb-2">Precio</h3>
          <div class="flex gap-2 mb-2">
            <input type="number" placeholder="$ Mínimo" class="border w-full p-2 rounded text-sm" id="minPrice" min="0" max="16000" aria-label="Precio mínimo" oninput="validatePriceInput(this)">
            <input type="number" placeholder="$ Máximo" class="border w-full p-2 rounded text-sm" id="maxPrice" min="0" max="16000" aria-label="Precio máximo" oninput="validatePriceInput(this)">
          </div>
          <div class="flex justify-between text-xs text-gray-500">
            <span>$0</span>
            <span>$16,000</span>
          </div>
        </div>

        <div class="mb-6">
          <h3 class="font-medium mb-2">Tipo de Consola</h3>
          <div class="flex flex-wrap gap-2" role="group" aria-label="Filtros de tipo de consola">
            <button class="filter-btn px-3 py-1 rounded-full bg-gradient-to-r from-blue-100 to-purple-100 text-gray-700 text-xs border border-blue-200 hover:from-blue-200 hover:to-purple-200 hover:text-blue-800 transition" data-filter="portatil" aria-label="Filtrar por consolas portátiles">Portátil</button>
            <button class="filter-btn px-3 py-1 rounded-full bg-gradient-to-r from-blue-100 to-purple-100 text-gray-700 text-xs border border-blue-200 hover:from-blue-200 hover:to-purple-200 hover:text-blue-800 transition" data-filter="sobremesa" aria-label="Filtrar por consolas de sobremesa">Sobremesa</button>
            <button class="filter-btn px-3 py-1 rounded-full bg-gradient-to-r from-blue-100 to-purple-100 text-gray-700 text-xs border border-blue-200 hover:from-blue-200 hover:to-purple-200 hover:text-blue-800 transition" data-filter="hibrida" aria-label="Filtrar por consolas híbridas">Híbrida</button>
          </div>
        </div>

        <div class="mb-6">
          <h3 class="font-medium mb-2">Marca</h3>
          <div class="max-h-48 overflow-y-auto border rounded p-3 text-sm space-y-2" role="group" aria-label="Filtros de marca">
            <label class="flex items-center"><input type="checkbox" class="mr-2 brand-filter" value="sony" aria-label="Filtrar por marca Sony"> Sony</label>
            <label class="flex items-center"><input type="checkbox" class="mr-2 brand-filter" value="nintendo" aria-label="Filtrar por marca Nintendo"> Nintendo</label>
            <label class="flex items-center"><input type="checkbox" class="mr-2 brand-filter" value="microsoft" aria-label="Filtrar por marca Microsoft"> Microsoft</label>
            <label class="flex items-center"><input type="checkbox" class="mr-2 brand-filter" value="valve" aria-label="Filtrar por marca Valve"> Valve</label>
            <label class="flex items-center"><input type="checkbox" class="mr-2 brand-filter" value="astra" aria-label="Filtrar por marca Astra One"> Astra One</label>
            <label class="flex items-center"><input type="checkbox" class="mr-2 brand-filter" value="asus" aria-label="Filtrar por marca ASUS ROG"> ASUS ROG</label>
          </div>
        </div>

        <div class="mb-6">
          <h3 class="font-medium mb-2">Ofertas</h3>
          <label class="flex items-center">
            <input type="checkbox" class="mr-2" id="ofertasFilter">
            <span class="text-sm">Solo productos en oferta</span>
          </label>
        </div>
      </aside>

      <!-- Productos -->
      <main class="flex-1">
        <!-- Toolbar -->
        <div class="bg-white rounded-lg shadow p-4 mb-6">
          <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
            <div class="flex items-center space-x-4">
              <span class="text-sm text-gray-600">Mostrando <span id="productCount">8</span> productos</span>
              <div class="flex items-center space-x-2">
                <button class="p-2 text-gray-600 hover:text-gray-800 active" id="gridView">
                  <i class="fas fa-th"></i>
                </button>
                <button class="p-2 text-gray-400 hover:text-gray-600" id="listView">
                  <i class="fas fa-list"></i>
                </button>
              </div>
            </div>
            <div class="flex items-center space-x-4">
              <div class="flex items-center space-x-2">
                <button id="selectAllBtn" class="px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition">
                  <i class="fas fa-check-square mr-1"></i>Seleccionar Todo
                </button>
                <button id="deselectAllBtn" class="px-3 py-1 bg-gray-500 text-white text-sm rounded hover:bg-gray-600 transition hidden">
                  <i class="fas fa-square mr-1"></i>Deseleccionar Todo
                </button>
                <span id="selectedCount" class="text-sm text-blue-600 font-medium hidden">
                  <i class="fas fa-check-circle mr-1"></i><span id="selectedNumber">0</span> seleccionados
                </span>
              </div>
              <div class="flex items-center space-x-2">
                <label class="text-sm text-gray-600">Ordenar por:</label>
                <select class="border rounded p-2 text-sm" id="sortSelect">
                  <option value="relevance">Relevancia</option>
                  <option value="price-low">Precio: Menor a Mayor</option>
                  <option value="price-high">Precio: Mayor a Menor</option>
                  <option value="name">Nombre A-Z</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <!-- Grid de productos -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6" id="productsGrid">
          <!-- Producto 1 -->
          <div class="product-card bg-white rounded-lg shadow p-4 relative" data-price="12999" data-brand="sony" data-type="sobremesa" data-name="Sony PlayStation 5">
            <input type="checkbox" class="select-checkbox" onchange="toggleProductSelection(this)">
            <div class="price-badge">NUEVO</div>
            <button class="wishlist-btn" onclick="toggleWishlist(this)">
              <i class="far fa-heart"></i>
            </button>
            <img src="Imagenes/Play.png" alt="Sony PlayStation 5" class="w-full h-48 object-contain rounded mb-4 cursor-pointer hover:opacity-90 transition-opacity" data-id="Sony PlayStation 5" onclick="openProductDetails(1, 'Sony PlayStation 5 PS5', 12999, 'Imagenes/Play.png')" onerror="this.src='https://via.placeholder.com/300x200?text=Imagen+no+disponible'">
            <h4 class="text-sm font-semibold mb-2 line-clamp-2">Sony PlayStation 5 PS5</h4>
            <p class="text-xs text-gray-600 mb-2 line-clamp-2">La última generación de consolas Sony, con gráficos 4K y velocidades ultra rápidas.</p>
            <div class="flex items-center justify-between mb-3">
              <div>
                <p class="text-gray-500 text-xs">Desde $1,299 quincenales</p>
                <p class="text-lg font-bold text-gray-800">$12,999</p>
              </div>
              <div class="flex items-center text-yellow-400 text-xs">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star-half-alt"></i>
                <span class="text-gray-500 ml-1">(128)</span>
              </div>
            </div>
            <div class="flex gap-2">
              <button class="flex-1 bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition text-sm font-medium">
                <i class="fas fa-shopping-cart mr-1"></i>Agregar
              </button>
              <button class="px-3 py-2 border border-gray-300 rounded hover:bg-gray-50 transition">
                <i class="fas fa-heart text-gray-400"></i>
              </button>
            </div>
          </div>

          <!-- Producto 2 -->
          <div class="product-card bg-white rounded-lg shadow p-4 relative" data-price="5999" data-brand="nintendo" data-type="hibrida" data-name="Nintendo Switch">
            <input type="checkbox" class="select-checkbox" onchange="toggleProductSelection(this)">
            <button class="wishlist-btn" onclick="toggleWishlist(this)">
              <i class="far fa-heart"></i>
            </button>
            <img src="Imagenes/Switch.png" alt="Nintendo Switch" class="w-full h-48 object-contain rounded mb-4 cursor-pointer hover:opacity-90 transition-opacity" data-id="Nintendo Switch" onclick="openProductDetails(2, 'Nintendo Switch', 5999, 'Imagenes/Switch.png')" onerror="this.src='https://via.placeholder.com/300x200?text=Imagen+no+disponible'">
            <h4 class="text-sm font-semibold mb-2 line-clamp-2">Nintendo Switch</h4>
            <p class="text-xs text-gray-600 mb-2 line-clamp-2">Consola híbrida portátil y de sobremesa, ideal para jugar en casa o donde quieras.</p>
            <div class="flex items-center justify-between mb-3">
              <div>
                <p class="text-gray-500 text-xs">Desde $599 quincenales</p>
                <p class="text-lg font-bold text-gray-800">$5,999</p>
              </div>
              <div class="flex items-center text-yellow-400 text-xs">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="far fa-star"></i>
                <span class="text-gray-500 ml-1">(95)</span>
              </div>
            </div>
            <div class="flex gap-2">
              <button class="flex-1 bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition text-sm font-medium">
                <i class="fas fa-shopping-cart mr-1"></i>Agregar
              </button>
              <button class="px-3 py-2 border border-gray-300 rounded hover:bg-gray-50 transition">
                <i class="fas fa-heart text-gray-400"></i>
              </button>
            </div>
          </div>

          <!-- Producto 3 -->
          <div class="product-card bg-white rounded-lg shadow p-4 relative" data-price="12999" data-brand="valve" data-type="portatil" data-name="Steam Deck" data-oferta="true">
            <input type="checkbox" class="select-checkbox" onchange="toggleProductSelection(this)">
            <div class="price-badge">-13%</div>
            <button class="wishlist-btn" onclick="toggleWishlist(this)">
              <i class="far fa-heart"></i>
            </button>
            <img src="Imagenes/Steam.png" alt="Steam Deck" class="w-full h-48 object-contain rounded mb-4 cursor-pointer hover:opacity-90 transition-opacity" data-id="Steam Deck" onclick="openProductDetails(3, 'Steam Deck', 12999, 'Imagenes/Steam.png')" onerror="this.src='https://via.placeholder.com/300x200?text=Imagen+no+disponible'">
            <h4 class="text-sm font-semibold mb-2 line-clamp-2">Steam Deck</h4>
            <p class="text-xs text-gray-600 mb-2 line-clamp-2">Potente consola portátil tipo PC para juegos de Steam</p>
            <div class="flex items-center justify-between mb-3">
              <div>
                <p class="text-gray-500 text-xs">Desde $1,299 quincenales</p>
                <p class="text-lg font-bold text-gray-800">$12,999</p>
                <p class="text-sm text-gray-400 line-through">$14,999</p>
              </div>
              <div class="flex items-center text-yellow-400 text-xs">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <span class="text-gray-500 ml-1">(203)</span>
              </div>
            </div>
            <div class="flex gap-2">
              <button class="flex-1 bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition text-sm font-medium">
                <i class="fas fa-shopping-cart mr-1"></i>Agregar
              </button>
              <button class="px-3 py-2 border border-gray-300 rounded hover:bg-gray-50 transition">
                <i class="fas fa-heart text-gray-400"></i>
              </button>
            </div>
          </div>

          <!-- Producto 4 -->
          <div class="product-card bg-white rounded-lg shadow p-4 relative" data-price="11999" data-brand="microsoft" data-type="sobremesa" data-name="Microsoft Xbox Series X">
            <input type="checkbox" class="select-checkbox" onchange="toggleProductSelection(this)">
            <button class="wishlist-btn" onclick="toggleWishlist(this)">
              <i class="far fa-heart"></i>
            </button>
            <img src="Imagenes/Xbox.png" alt="Microsoft Xbox Series X" class="w-full h-48 object-contain rounded mb-4 cursor-pointer hover:opacity-90 transition-opacity" data-id="Microsoft Xbox Series X" onclick="openProductDetails(4, 'Microsoft Xbox Series X', 11999, 'Imagenes/Xbox.png')" onerror="this.src='https://via.placeholder.com/300x200?text=Imagen+no+disponible'">
            <h4 class="text-sm font-semibold mb-2 line-clamp-2">Microsoft Xbox Series X</h4>
            <p class="text-xs text-gray-600 mb-2 line-clamp-2">Disfruta gráficos increíbles y tiempos de carga mínimos con la consola más rápida de Xbox.</p>
            <div class="flex items-center justify-between mb-3">
              <div>
                <p class="text-gray-500 text-xs">Desde $1,199 quincenales</p>
                <p class="text-lg font-bold text-gray-800">$11,999</p>
              </div>
              <div class="flex items-center text-yellow-400 text-xs">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <span class="text-gray-500 ml-1">(156)</span>
              </div>
            </div>
            <div class="flex gap-2">
              <button class="flex-1 bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition text-sm font-medium">
                <i class="fas fa-shopping-cart mr-1"></i>Agregar
              </button>
              <button class="px-3 py-2 border border-gray-300 rounded hover:bg-gray-50 transition">
                <i class="fas fa-heart text-gray-400"></i>
              </button>
            </div>
          </div>

          <!-- Producto 5 -->
          <div class="product-card bg-white rounded-lg shadow p-4 relative" data-price="4499" data-brand="sony" data-type="sobremesa" data-name="Sony PlayStation 4">
            <input type="checkbox" class="select-checkbox" onchange="toggleProductSelection(this)">
            <button class="wishlist-btn" onclick="toggleWishlist(this)">
              <i class="far fa-heart"></i>
            </button>
            <img src="Imagenes/Station 4 o 3.png" alt="Sony PlayStation 4" class="w-full h-48 object-contain rounded mb-4 cursor-pointer hover:opacity-90 transition-opacity" data-id="Sony PlayStation 4" onclick="openProductDetails(5, 'Sony PlayStation 4', 6999, 'Imagenes/Station 4 o 3.png')" onerror="this.src='https://via.placeholder.com/300x200?text=Imagen+no+disponible'">
            <h4 class="text-sm font-semibold mb-2 line-clamp-2">Sony PlayStation 4 (PS4)</h4>
            <p class="text-xs text-gray-600 mb-2 line-clamp-2">Experimenta la diversión en alta definición. La consola ideal para disfrutar en casa</p>
            <div class="flex items-center justify-between mb-3">
              <div>
                <p class="text-gray-500 text-xs">Desde $449 quincenales</p>
                <p class="text-lg font-bold text-gray-800">$4,499</p>
              </div>
              <div class="flex items-center text-yellow-400 text-xs">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="far fa-star"></i>
                <span class="text-gray-500 ml-1">(89)</span>
              </div>
            </div>
            <div class="flex gap-2">
              <button class="flex-1 bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition text-sm font-medium">
                <i class="fas fa-shopping-cart mr-1"></i>Agregar
              </button>
              <button class="px-3 py-2 border border-gray-300 rounded hover:bg-gray-50 transition">
                <i class="fas fa-heart text-gray-400"></i>
              </button>
            </div>
          </div>

          <!-- Producto 6 -->
          <div class="product-card bg-white rounded-lg shadow p-4 relative" data-price="8999" data-brand="asus" data-type="portatil" data-name="ASUS ROG Ally" data-oferta="true">
            <input type="checkbox" class="select-checkbox" onchange="toggleProductSelection(this)">
            <div class="price-badge">-10%</div>
            <button class="wishlist-btn" onclick="toggleWishlist(this)">
              <i class="far fa-heart"></i>
            </button>
            <img src="Imagenes/rock.png" alt="ASUS ROG Ally" class="w-full h-48 object-contain rounded mb-4 cursor-pointer hover:opacity-90 transition-opacity" data-id="ASUS ROG Ally" onclick="openProductDetails(6, 'ASUS ROG Ally', 15999, 'Imagenes/rock.png')" onerror="this.src='https://via.placeholder.com/300x200?text=Imagen+no+disponible'">
            <h4 class="text-sm font-semibold mb-2 line-clamp-2">ASUS ROG Ally</h4>
            <p class="text-xs text-gray-600 mb-2 line-clamp-2">La nueva portátil gamer con potencia de PC. Pantalla full HD, procesador Ryzen Z1 Extreme y compatibilidad con Xbox Game Pass y Steam.</p>
            <div class="flex items-center justify-between mb-3">
              <div>
                <p class="text-gray-500 text-xs">Desde $899 quincenales</p>
                <p class="text-lg font-bold text-gray-800">$8,999</p>
                <p class="text-sm text-gray-400 line-through">$9,999</p>
              </div>
              <div class="flex items-center text-yellow-400 text-xs">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="far fa-star"></i>
                <span class="text-gray-500 ml-1">(142)</span>
              </div>
            </div>
            <div class="flex gap-2">
              <button class="flex-1 bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition text-sm font-medium">
                <i class="fas fa-shopping-cart mr-1"></i>Agregar
              </button>
              <button class="px-3 py-2 border border-gray-300 rounded hover:bg-gray-50 transition">
                <i class="fas fa-heart text-gray-400"></i>
              </button>
            </div>
          </div>

          <!-- Producto 7 -->
          <div class="product-card bg-white rounded-lg shadow p-4 relative" data-price="13499" data-brand="astra" data-type="portatil" data-name="Astra One">
            <input type="checkbox" class="select-checkbox" onchange="toggleProductSelection(this)">
            <button class="wishlist-btn" onclick="toggleWishlist(this)">
              <i class="far fa-heart"></i>
            </button>
            <img src="Imagenes/astra .png" alt="Astra One" class="w-full h-48 object-contain rounded mb-4 cursor-pointer hover:opacity-90 transition-opacity" data-id="Astra One" onclick="openProductDetails(7, 'Astra One', 3999, 'Imagenes/astra .png')" onerror="this.src='https://via.placeholder.com/300x200?text=Imagen+no+disponible'">
            <h4 class="text-sm font-semibold mb-2 line-clamp-2">Astra One</h4>
            <p class="text-xs text-gray-600 mb-2 line-clamp-2">Máxima velocidad, tecnología cuántica y compatibilidad con realidad virtual avanzada</p>
            <div class="flex items-center justify-between mb-3">
              <div>
                <p class="text-gray-500 text-xs">Desde $1,349 quincenales</p>
                <p class="text-lg font-bold text-gray-800">$13,499</p>
              </div>
              <div class="flex items-center text-yellow-400 text-xs">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <span class="text-gray-500 ml-1">(167)</span>
              </div>
            </div>
            <div class="flex gap-2">
              <button class="flex-1 bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition text-sm font-medium">
                <i class="fas fa-shopping-cart mr-1"></i>Agregar
              </button>
              <button class="px-3 py-2 border border-gray-300 rounded hover:bg-gray-50 transition">
                <i class="fas fa-heart text-gray-400"></i>
              </button>
            </div>
          </div>

          <!-- Producto 8 -->
          <div class="product-card bg-white rounded-lg shadow p-4 relative" data-price="15999" data-brand="valve" data-type="portatil" data-name="Steam Deck OLED">
            <input type="checkbox" class="select-checkbox" onchange="toggleProductSelection(this)">
            <div class="price-badge">NUEVO</div>
            <button class="wishlist-btn" onclick="toggleWishlist(this)">
              <i class="far fa-heart"></i>
            </button>
            <img src="Imagenes/Steam Deck.png" alt="Steam Deck OLED" class="w-full h-48 object-contain rounded mb-4 cursor-pointer hover:opacity-90 transition-opacity" data-id="Steam Deck OLED" onclick="openProductDetails(8, 'Steam Deck OLED', 14999, 'Imagenes/Steam Deck.png')" onerror="this.src='https://via.placeholder.com/300x200?text=Imagen+no+disponible'">
            <h4 class="text-sm font-semibold mb-2 line-clamp-2">Steam Deck OLED</h4>
            <p class="text-xs text-gray-600 mb-2 line-clamp-2">La nueva versión con pantalla OLED y mejor rendimiento</p>
            <div class="flex items-center justify-between mb-3">
              <div>
                <p class="text-gray-500 text-xs">Desde $1,599 quincenales</p>
                <p class="text-lg font-bold text-gray-800">$15,999</p>
              </div>
              <div class="flex items-center text-yellow-400 text-xs">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <span class="text-gray-500 ml-1">(78)</span>
              </div>
            </div>
            <div class="flex gap-2">
              <button class="flex-1 bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition text-sm font-medium">
                <i class="fas fa-shopping-cart mr-1"></i>Agregar
              </button>
              <button class="px-3 py-2 border border-gray-300 rounded hover:bg-gray-50 transition">
                <i class="fas fa-heart text-gray-400"></i>
              </button>
            </div>
          </div>

        </div>


      </main>
    </div>
  </div>

  <!-- Modal del Carrito -->
  <div id="cartModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
    <div class="flex items-center justify-center min-h-screen p-4">
      <div class="bg-white rounded-lg shadow-xl max-w-md w-full max-h-96 overflow-hidden">
        <div class="flex items-center justify-between p-4 border-b">
          <h3 class="text-lg font-semibold">Carrito de Compras</h3>
          <button onclick="hideCart()" class="text-gray-500 hover:text-gray-700">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div id="cartItems" class="p-4 overflow-y-auto max-h-64">
          <!-- Los items del carrito se cargarán aquí -->
        </div>
        <div class="p-4 border-t bg-gray-50">
          <div class="flex justify-between items-center mb-3">
            <span class="font-semibold">Total:</span>
            <span id="cartTotal" class="font-bold text-lg">$0</span>
          </div>
          <button onclick="checkout()" class="w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition">
            <i class="fas fa-shopping-cart mr-2"></i>Proceder al Pago
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal de Favoritos -->
  <div id="wishlistModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
    <div class="flex items-center justify-center min-h-screen p-4">
      <div class="bg-white rounded-lg shadow-xl max-w-md w-full max-h-96 overflow-hidden">
        <div class="flex items-center justify-between p-4 border-b">
          <h3 class="text-lg font-semibold">Mis Favoritos</h3>
          <button onclick="hideWishlist()" class="text-gray-500 hover:text-gray-700">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div id="wishlistItems" class="p-4 overflow-y-auto max-h-64">
          <!-- Los items de favoritos se cargarán aquí -->
        </div>
        <div class="p-4 border-t bg-gray-50">
          <button onclick="clearWishlist()" class="w-full bg-red-600 text-white py-2 rounded hover:bg-red-700 transition">
            <i class="fas fa-trash mr-2"></i>Limpiar Favoritos
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="bg-gray-800 text-white mt-16">
    <div class="max-w-7xl mx-auto px-4 py-8">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
        <div>
          <h3 class="text-lg font-semibold mb-4">Digital Swap</h3>
          <p class="text-gray-300 text-sm">Tu tienda de confianza para consolas y videojuegos.</p>
        </div>
        <div>
          <h4 class="font-semibold mb-4">Productos</h4>
          <ul class="space-y-2 text-sm text-gray-300">
            <li><a href="#" class="hover:text-white">Consolas</a></li>
            <li><a href="#" class="hover:text-white">Videojuegos</a></li>
            <li><a href="#" class="hover:text-white">Accesorios</a></li>
            <li><a href="#" class="hover:text-white">Ofertas</a></li>
          </ul>
        </div>
        <div>
          <h4 class="font-semibold mb-4">Soporte</h4>
          <ul class="space-y-2 text-sm text-gray-300">
            <li><a href="#" class="hover:text-white">Contacto</a></li>
            <li><a href="#" class="hover:text-white">Garantía</a></li>
            <li><a href="#" class="hover:text-white">Devoluciones</a></li>
            <li><a href="#" class="hover:text-white">FAQ</a></li>
          </ul>
        </div>
        <div>
          <h4 class="font-semibold mb-4">Síguenos</h4>
          <div class="flex space-x-4">
            <a href="#" class="text-gray-300 hover:text-white"><i class="fab fa-facebook"></i></a>
            <a href="#" class="text-gray-300 hover:text-white"><i class="fab fa-twitter"></i></a>
            <a href="#" class="text-gray-300 hover:text-white"><i class="fab fa-instagram"></i></a>
            <a href="#" class="text-gray-300 hover:text-white"><i class="fab fa-youtube"></i></a>
          </div>
        </div>
      </div>
      <div class="border-t border-gray-700 mt-8 pt-8 text-center text-sm text-gray-300">
        <p>&copy; 2024 Digital Swap. Todos los derechos reservados.</p>
      </div>
    </div>
  </footer>

  <!-- Modal de Detalles del Producto -->
  <div id="modalDetalles" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
    <div class="flex items-center justify-center min-h-screen p-4">
      <div class="bg-white rounded-lg max-w-3xl w-full p-8 relative flex flex-col md:flex-row gap-8 shadow-2xl modal">
        <button id="cerrarModalDetalles" class="absolute top-4 right-4 text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
        <!-- Imagen grande a la izquierda -->
        <div class="flex-1 flex items-center justify-center">
          <img id="modalImg" src="" alt="Imagen del producto" class="w-72 h-72 object-contain rounded border shadow-md">
        </div>
        <!-- Info a la derecha -->
        <div class="flex-1 flex flex-col justify-center">
          <h2 id="modalNombre" class="text-2xl font-bold mb-4 text-gray-800"></h2>
          <p id="modalDescripcion" class="text-gray-600 mb-4 text-lg"></p>
          <p id="modalPrecio" class="text-3xl font-extrabold text-blue-600 mb-6"></p>
          <button class="w-full bg-yellow-400 hover:bg-yellow-500 text-gray-900 font-bold py-3 rounded-lg text-lg shadow transition mb-4 flex items-center justify-center gap-2">
            <i class="fas fa-shopping-cart"></i> Comprar ahora
          </button>
          <div class="text-sm text-gray-500 mt-2">
            <i class="fas fa-shield-alt text-green-500 mr-1"></i> Compra protegida | <i class="fas fa-truck text-blue-500 mr-1"></i> Envío gratis
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Configuración global
    const CONFIG = {
      animationDuration: 300,
      notificationDuration: 3000,
      maxPrice: 16000
    };



    // Función para validar inputs de precio
    function validatePriceInput(input) {
      try {
        const value = parseFloat(input.value);
        const min = parseFloat(input.min) || 0;
        const max = parseFloat(input.max) || CONFIG.maxPrice;
        
        if (input.value && (value < min || value > max)) {
          input.classList.add('border-red-500');
          return false;
        } else {
          input.classList.remove('border-red-500');
        }
        
        // Validar que el precio mínimo no sea mayor que el máximo
        const minPriceInput = document.getElementById('minPrice');
        const maxPriceInput = document.getElementById('maxPrice');
        
        if (minPriceInput.value && maxPriceInput.value) {
          const minPrice = parseFloat(minPriceInput.value);
          const maxPrice = parseFloat(maxPriceInput.value);
          
          if (minPrice > maxPrice) {
            return false;
          }
        }
        
        return true;
      } catch (error) {
        console.error('Error al validar precio:', error);
        return false;
      }
    }

    // Clase para manejar el catálogo
    class ProductCatalog {
      constructor() {
        this.initializeElements();
        this.bindEvents();
        this.applyFilters();
        this.selectedProducts = new Set();
      }

      initializeElements() {
        this.filterBtns = document.querySelectorAll('.filter-btn');
        this.brandFilters = document.querySelectorAll('.brand-filter');
        this.ofertasFilter = document.getElementById('ofertasFilter');
        this.minPrice = document.getElementById('minPrice');
        this.maxPrice = document.getElementById('maxPrice');
        this.clearFilters = document.getElementById('clearFilters');
        this.sortSelect = document.getElementById('sortSelect');
        this.productsGrid = document.getElementById('productsGrid');
        this.productCount = document.getElementById('productCount');
        this.gridView = document.getElementById('gridView');
        this.listView = document.getElementById('listView');
        this.products = document.querySelectorAll('.product-card');
        this.selectAllBtn = document.getElementById('selectAllBtn');
        this.deselectAllBtn = document.getElementById('deselectAllBtn');
        this.selectedCount = document.getElementById('selectedCount');
        this.selectedNumber = document.getElementById('selectedNumber');
      }

      bindEvents() {
        // Filtros de tipo
        this.filterBtns.forEach(btn => {
          btn.addEventListener('click', () => {
            btn.classList.toggle('filter-active');
            this.applyFilters();
          });
        });

        // Filtros de marca
        this.brandFilters.forEach(filter => {
          filter.addEventListener('change', () => this.applyFilters());
        });

        // Filtro de ofertas
        if (this.ofertasFilter) {
          this.ofertasFilter.addEventListener('change', () => this.applyFilters());
        }

        // Filtros de precio con debounce y validación
        if (this.minPrice) {
          this.minPrice.addEventListener('input', this.debounce(() => {
            this.validatePriceInput(this.minPrice);
            this.applyFilters();
          }, 300));
        }
        if (this.maxPrice) {
          this.maxPrice.addEventListener('input', this.debounce(() => {
            this.validatePriceInput(this.maxPrice);
            this.applyFilters();
          }, 300));
        }

        // Limpiar filtros
        if (this.clearFilters) {
          this.clearFilters.addEventListener('click', () => this.clearAllFilters());
        }

        // Ordenamiento
        if (this.sortSelect) {
          this.sortSelect.addEventListener('change', () => this.applyFilters());
        }

        // Vista de productos
        if (this.gridView) {
          this.gridView.addEventListener('click', () => this.setGridView());
        }
        if (this.listView) {
          this.listView.addEventListener('click', () => this.setListView());
        }

        // Animaciones de hover
        this.products.forEach(card => {
          card.addEventListener('mouseenter', () => this.handleCardHover(card, true));
          card.addEventListener('mouseleave', () => this.handleCardHover(card, false));
        });

        // Agregar al carrito
        document.querySelectorAll('.product-card button').forEach(btn => {
          if (btn.textContent.includes('Agregar')) {
            btn.addEventListener('click', (e) => {
              e.preventDefault();
              this.addToCart(e);
            });
          }
        });

        // Botones de selección
        if (this.selectAllBtn) {
          this.selectAllBtn.addEventListener('click', () => this.selectAllProducts());
        }
        if (this.deselectAllBtn) {
          this.deselectAllBtn.addEventListener('click', () => this.deselectAllProducts());
        }
      }

      applyFilters() {
        let visibleCount = 0;
        const visibleProducts = [];

        this.products.forEach(product => {
          let show = true;

          // Filtro por tipo
          const activeTypeFilters = document.querySelectorAll('.filter-btn.filter-active');
          if (activeTypeFilters.length > 0) {
            const productType = product.dataset.type;
            const hasMatchingType = Array.from(activeTypeFilters).some(btn => 
              btn.dataset.filter === productType
            );
            if (!hasMatchingType) show = false;
          }

          // Filtro por marca
          const activeBrandFilters = document.querySelectorAll('.brand-filter:checked');
          if (activeBrandFilters.length > 0) {
            const productBrand = product.dataset.brand;
            const hasMatchingBrand = Array.from(activeBrandFilters).some(filter => 
              filter.value === productBrand
            );
            if (!hasMatchingBrand) show = false;
          }

          // Filtro por ofertas
          if (this.ofertasFilter && this.ofertasFilter.checked && !product.dataset.oferta) {
            show = false;
          }

          // Filtro por precio
          const price = parseInt(product.dataset.price);
          if (this.minPrice && this.minPrice.value && price < parseInt(this.minPrice.value)) show = false;
          if (this.maxPrice && this.maxPrice.value && price > parseInt(this.maxPrice.value)) show = false;

          product.style.display = show ? 'block' : 'none';
          if (show) {
            visibleCount++;
            visibleProducts.push(product);
          }
        });

        // Ordenamiento
        if (this.sortSelect && this.sortSelect.value !== 'relevance') {
          this.sortProducts(visibleProducts, this.sortSelect.value);
        }

        if (this.productCount) {
          this.productCount.textContent = visibleCount;
        }

        // Actualizar UI de selección después de filtrar
        this.updateSelectionUI();

        // Mostrar mensaje si no hay productos
        this.showNoProductsMessage(visibleCount);
      }



      sortProducts(products, sortType) {
        const productsArray = Array.from(products);
        
        productsArray.sort((a, b) => {
          switch(sortType) {
            case 'price-low':
              return parseInt(a.dataset.price) - parseInt(b.dataset.price);
            case 'price-high':
              return parseInt(b.dataset.price) - parseInt(a.dataset.price);
            case 'name':
              return a.dataset.name.localeCompare(b.dataset.name);
            default:
              return 0;
          }
        });

        // Reordenar en el DOM con animación
        productsArray.forEach((product, index) => {
          setTimeout(() => {
            if (this.productsGrid) {
              this.productsGrid.appendChild(product);
            }
          }, index * 50);
        });
      }

      clearAllFilters() {
        this.filterBtns.forEach(btn => btn.classList.remove('filter-active'));
        this.brandFilters.forEach(filter => filter.checked = false);
        if (this.ofertasFilter) this.ofertasFilter.checked = false;
        if (this.minPrice) this.minPrice.value = '';
        if (this.maxPrice) this.maxPrice.value = '';
        if (this.sortSelect) this.sortSelect.value = 'relevance';
        
        // Limpiar también las selecciones de productos
        this.deselectAllProducts();
        
        this.applyFilters();
        showNotification('Filtros y selecciones limpiados', 'info');
      }

      setGridView() {
        if (this.productsGrid) {
          this.productsGrid.className = 'grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6';
        }
        this.gridView.classList.add('text-gray-600');
        this.listView.classList.remove('text-gray-600');
      }

      setListView() {
        if (this.productsGrid) {
          this.productsGrid.className = 'grid grid-cols-1 gap-6';
        }
        this.listView.classList.add('text-gray-600');
        this.gridView.classList.remove('text-gray-600');
      }

      handleCardHover(card, isEntering) {
        if (isEntering) {
          card.style.transform = 'translateY(-5px)';
          card.style.boxShadow = '0 10px 25px rgba(0,0,0,0.15)';
        } else {
          card.style.transform = 'translateY(0)';
          card.style.boxShadow = '';
        }
      }

      addToCart(event) {
        try {
          const productCard = event.target.closest('.product-card');
          if (!productCard) {
            showNotification('Error: No se pudo identificar el producto', 'error');
            return;
          }
          
          const productNameElement = productCard.querySelector('h4');
          if (!productNameElement) {
            showNotification('Error: No se pudo obtener el nombre del producto', 'error');
            return;
          }
          
          const productName = productNameElement.textContent;
          showNotification(`${productName} agregado al carrito`, 'success');
          
          // Simular agregar al carrito
          const cart = JSON.parse(localStorage.getItem('cart') || '[]');
          const productData = {
            id: Date.now(),
            name: productName,
            price: productCard.dataset.price,
            image: productCard.querySelector('img').src,
            addedAt: new Date().toISOString()
          };
          cart.push(productData);
          localStorage.setItem('cart', JSON.stringify(cart));
          
        } catch (error) {
          console.error('Error al agregar al carrito:', error);
          showNotification('Error al agregar el producto al carrito', 'error');
        }
      }

      showNoProductsMessage(count) {
        let noProductsMsg = document.getElementById('noProductsMessage');
        
        if (count === 0) {
          if (!noProductsMsg) {
            noProductsMsg = document.createElement('div');
            noProductsMsg.id = 'noProductsMessage';
            noProductsMsg.className = 'text-center py-12 text-gray-500';
            noProductsMsg.innerHTML = `
              <i class="fas fa-search text-4xl mb-4 text-gray-300"></i>
              <h3 class="text-lg font-medium mb-2">No se encontraron productos</h3>
              <p class="text-sm">Intenta ajustar los filtros de búsqueda</p>
            `;
            this.productsGrid.appendChild(noProductsMsg);
          }
        } else if (noProductsMsg) {
          noProductsMsg.remove();
        }
      }

      validatePriceInput(input) {
        try {
          if (!input || !input.value) return;
          
          const value = parseInt(input.value);
          if (isNaN(value)) {
            input.value = '';
            return false;
          } else if (value < 0) {
            input.value = 0;
            return false;
          } else if (value > CONFIG.maxPrice) {
            input.value = CONFIG.maxPrice;
            return false;
          }
          return true;
        } catch (error) {
          console.error('Error en validación de precio:', error);
          return false;
        }
      }

      debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
          const later = () => {
            clearTimeout(timeout);
            func(...args);
          };
          clearTimeout(timeout);
          timeout = setTimeout(later, wait);
        };
      }

      selectAllProducts() {
        let selectedCount = 0;
        this.products.forEach(product => {
          const checkbox = product.querySelector('.select-checkbox');
          if (checkbox && product.style.display !== 'none') {
            checkbox.checked = true;
            product.classList.add('selected');
            this.selectedProducts.add(product.dataset.name);
            selectedCount++;
          }
        });
        this.updateSelectionUI();
        showNotification(`${selectedCount} productos seleccionados`, 'success');
      }

      deselectAllProducts() {
        this.products.forEach(product => {
          const checkbox = product.querySelector('.select-checkbox');
          if (checkbox) {
            checkbox.checked = false;
            product.classList.remove('selected');
            this.selectedProducts.delete(product.dataset.name);
          }
        });
        this.updateSelectionUI();
        showNotification('Todos los productos deseleccionados', 'info');
      }

      updateSelectionUI() {
        const selectedCount = this.selectedProducts.size;
        
        if (selectedCount > 0) {
          if (this.selectAllBtn) this.selectAllBtn.classList.add('hidden');
          if (this.deselectAllBtn) this.deselectAllBtn.classList.remove('hidden');
          if (this.selectedCount) this.selectedCount.classList.remove('hidden');
          if (this.selectedNumber) this.selectedNumber.textContent = selectedCount;
        } else {
          if (this.selectAllBtn) this.selectAllBtn.classList.remove('hidden');
          if (this.deselectAllBtn) this.deselectAllBtn.classList.add('hidden');
          if (this.selectedCount) this.selectedCount.classList.add('hidden');
        }
      }
    }

    // Funcionalidad de selección de productos
    function toggleProductSelection(checkbox) {
      try {
        if (!checkbox) {
          console.error('Checkbox no encontrado');
          return;
        }

        const productCard = checkbox.closest('.product-card');
        if (!productCard) {
          console.error('Producto no encontrado');
          return;
        }

        const productName = productCard.dataset.name;
        if (!productName) {
          console.error('Nombre del producto no encontrado');
          return;
        }
        
        if (checkbox.checked) {
          productCard.classList.add('selected');
          // Agregar al Set de productos seleccionados
          if (window.productCatalog) {
            window.productCatalog.selectedProducts.add(productName);
            window.productCatalog.updateSelectionUI();
          }
        } else {
          productCard.classList.remove('selected');
          // Remover del Set de productos seleccionados
          if (window.productCatalog) {
            window.productCatalog.selectedProducts.delete(productName);
            window.productCatalog.updateSelectionUI();
          }
        }
      } catch (error) {
        console.error('Error en toggleProductSelection:', error);
      }
    }

    // Funcionalidad de wishlist
    function toggleWishlist(button) {
      try {
        if (!button) {
          console.error('Botón de wishlist no encontrado');
          return;
        }
        
        const productCard = button.closest('.product-card');
        if (!productCard) {
          console.error('Producto no encontrado');
          return;
        }

        const productName = productCard.dataset.name || 'Producto';
        const productImage = productCard.querySelector('img');
        
        button.classList.toggle('active');
        const icon = button.querySelector('i');
        if (icon) {
          if (button.classList.contains('active')) {
            icon.className = 'fas fa-heart';
            
            // Guardar en localStorage
            const wishlist = JSON.parse(localStorage.getItem('wishlist') || '[]');
            const productData = {
              id: Date.now(),
              name: productName,
              price: productCard.dataset.price,
              image: productImage ? productImage.src : '',
              addedAt: new Date().toISOString()
            };
            wishlist.push(productData);
            localStorage.setItem('wishlist', JSON.stringify(wishlist));
          } else {
            icon.className = 'far fa-heart';
            
            // Remover de localStorage
            const wishlist = JSON.parse(localStorage.getItem('wishlist') || '[]');
            const updatedWishlist = wishlist.filter(item => item.name !== productName);
            localStorage.setItem('wishlist', JSON.stringify(updatedWishlist));
          }
        }
      } catch (error) {
        console.error('Error en toggleWishlist:', error);
      }
    }

    // Sistema de notificaciones mejorado
    function showNotification(message, type = 'success') {
      // Limpiar notificaciones existentes
      const existingNotifications = document.querySelectorAll('.notification');
      existingNotifications.forEach(notification => {
        notification.remove();
      });

      const colors = {
        success: 'bg-green-500',
        error: 'bg-red-500',
        warning: 'bg-yellow-500',
        info: 'bg-blue-500'
      };

      const icons = {
        success: 'fas fa-check-circle',
        error: 'fas fa-exclamation-circle',
        warning: 'fas fa-exclamation-triangle',
        info: 'fas fa-info-circle'
      };

      const notification = document.createElement('div');
      notification.className = `fixed top-4 right-4 ${colors[type]} text-white px-6 py-3 rounded shadow-lg z-50 notification flex items-center space-x-2`;
      notification.innerHTML = `
        <i class="${icons[type]}"></i>
        <span>${message}</span>
      `;
      
      document.body.appendChild(notification);
      
      setTimeout(() => {
        if (notification.parentNode) {
          notification.style.transform = 'translateX(100%)';
          notification.style.opacity = '0';
          setTimeout(() => notification.remove(), 300);
        }
      }, CONFIG.notificationDuration);
    }

    // Cargar estado de wishlist
    function loadWishlistState() {
      try {
        const wishlist = JSON.parse(localStorage.getItem('wishlist') || '[]');
        const wishlistNames = wishlist.map(item => item.name);
        
        document.querySelectorAll('.product-card').forEach(card => {
          const productName = card.dataset.name;
          if (wishlistNames.includes(productName)) {
            const wishlistBtn = card.querySelector('.wishlist-btn');
            const icon = wishlistBtn.querySelector('i');
            if (wishlistBtn && icon) {
              wishlistBtn.classList.add('active');
              icon.className = 'fas fa-heart';
            }
          }
        });
      } catch (error) {
        console.error('Error al cargar estado de wishlist:', error);
      }
    }

    // Funciones para el header y navegación
    function showCart() {
      const modal = document.getElementById('cartModal');
      const cartItems = document.getElementById('cartItems');
      const cartTotal = document.getElementById('cartTotal');
      
      const cart = JSON.parse(localStorage.getItem('cart') || '[]');
      
      if (cart.length === 0) {
        cartItems.innerHTML = '<p class="text-gray-500 text-center py-8">Tu carrito está vacío</p>';
        cartTotal.textContent = '$0';
      } else {
        let total = 0;
        cartItems.innerHTML = cart.map(item => {
          total += parseInt(item.price);
          return `
            <div class="flex items-center space-x-3 mb-3 p-2 bg-gray-50 rounded">
              <img src="${item.image}" alt="${item.name}" class="w-12 h-12 object-contain">
              <div class="flex-1">
                <h4 class="text-sm font-medium">${item.name}</h4>
                <p class="text-xs text-gray-600">$${parseInt(item.price).toLocaleString()}</p>
              </div>
              <button onclick="removeFromCart(${item.id})" class="text-red-500 hover:text-red-700">
                <i class="fas fa-trash"></i>
              </button>
            </div>
          `;
        }).join('');
        cartTotal.textContent = `$${total.toLocaleString()}`;
      }
      
      modal.classList.remove('hidden');
      updateCartCount();
    }

    function hideCart() {
      document.getElementById('cartModal').classList.add('hidden');
    }

    function showWishlist() {
      const modal = document.getElementById('wishlistModal');
      const wishlistItems = document.getElementById('wishlistItems');
      
      const wishlist = JSON.parse(localStorage.getItem('wishlist') || '[]');
      
      if (wishlist.length === 0) {
        wishlistItems.innerHTML = '<p class="text-gray-500 text-center py-8">No tienes favoritos</p>';
      } else {
        wishlistItems.innerHTML = wishlist.map(item => `
          <div class="flex items-center space-x-3 mb-3 p-2 bg-gray-50 rounded">
            <img src="${item.image}" alt="${item.name}" class="w-12 h-12 object-contain">
            <div class="flex-1">
              <h4 class="text-sm font-medium">${item.name}</h4>
              <p class="text-xs text-gray-600">$${parseInt(item.price).toLocaleString()}</p>
            </div>
            <button onclick="removeFromWishlist('${item.name}')" class="text-red-500 hover:text-red-700">
              <i class="fas fa-trash"></i>
            </button>
          </div>
        `).join('');
      }
      
      modal.classList.remove('hidden');
      updateWishlistCount();
    }

    function hideWishlist() {
      document.getElementById('wishlistModal').classList.add('hidden');
    }

    function removeFromCart(itemId) {
      const cart = JSON.parse(localStorage.getItem('cart') || '[]');
      const updatedCart = cart.filter(item => item.id !== itemId);
      localStorage.setItem('cart', JSON.stringify(updatedCart));
      showCart(); // Recargar el modal
      updateCartCount();
    }

    function removeFromWishlist(productName) {
      const wishlist = JSON.parse(localStorage.getItem('wishlist') || '[]');
      const updatedWishlist = wishlist.filter(item => item.name !== productName);
      localStorage.setItem('wishlist', JSON.stringify(updatedWishlist));
      
      // Actualizar el botón en la página
      document.querySelectorAll('.product-card').forEach(card => {
        if (card.dataset.name === productName) {
          const wishlistBtn = card.querySelector('.wishlist-btn');
          const icon = wishlistBtn.querySelector('i');
          if (wishlistBtn && icon) {
            wishlistBtn.classList.remove('active');
            icon.className = 'far fa-heart';
          }
        }
      });
      
      showWishlist(); // Recargar el modal
      updateWishlistCount();
    }

    function clearWishlist() {
      localStorage.removeItem('wishlist');
      
      // Actualizar todos los botones de wishlist
      document.querySelectorAll('.wishlist-btn').forEach(btn => {
        const icon = btn.querySelector('i');
        if (btn && icon) {
          btn.classList.remove('active');
          icon.className = 'far fa-heart';
        }
      });
      
      showWishlist(); // Recargar el modal
      updateWishlistCount();
    }

    function updateCartCount() {
      const cart = JSON.parse(localStorage.getItem('cart') || '[]');
      const cartCount = document.getElementById('cartCount');
      
      if (cart.length > 0) {
        cartCount.textContent = cart.length;
        cartCount.classList.remove('hidden');
      } else {
        cartCount.classList.add('hidden');
      }
    }

    function updateWishlistCount() {
      const wishlist = JSON.parse(localStorage.getItem('wishlist') || '[]');
      const wishlistCount = document.getElementById('wishlistCount');
      
      if (wishlist.length > 0) {
        wishlistCount.textContent = wishlist.length;
        wishlistCount.classList.remove('hidden');
      } else {
        wishlistCount.classList.add('hidden');
      }
    }

    function checkout() {
      setTimeout(() => {
        hideCart();
        // Aquí se redirigiría a la página de pago
      }, 2000);
    }

    // Función para cargar el estado de wishlist
    function loadWishlistState() {
      try {
        const wishlist = JSON.parse(localStorage.getItem('wishlist') || '[]');
        const wishlistNames = wishlist.map(item => item.name);
        
        document.querySelectorAll('.product-card').forEach(card => {
          const productName = card.dataset.name;
          if (productName && wishlistNames.includes(productName)) {
            const wishlistBtn = card.querySelector('.wishlist-btn');
            const icon = wishlistBtn.querySelector('i');
            if (wishlistBtn && icon) {
              wishlistBtn.classList.add('active');
              icon.className = 'fas fa-heart';
            }
          }
        });
      } catch (error) {
        console.error('Error al cargar estado de wishlist:', error);
      }
    }

    // Función para agregar al carrito
    function addToCart(button) {
      try {
        const productCard = button.closest('.product-card');
        if (!productCard) {
          return;
        }
        
        const productNameElement = productCard.querySelector('h4');
        if (!productNameElement) {
          return;
        }
        
        const productName = productNameElement.textContent;
        const productPrice = productCard.dataset.price;
        const productImage = productCard.querySelector('img');
        
        // Validar que el precio sea válido
        if (!productPrice || isNaN(parseFloat(productPrice))) {
          return;
        }
        
        // Agregar al carrito en localStorage
        const cart = JSON.parse(localStorage.getItem('cart') || '[]');
        const productData = {
          id: Date.now(),
          name: productName,
          price: parseFloat(productPrice),
          image: productImage ? productImage.src : '',
          addedAt: new Date().toISOString()
        };
        cart.push(productData);
        localStorage.setItem('cart', JSON.stringify(cart));
        
        // Actualizar contador del carrito
        updateCartCount();
        
      } catch (error) {
        console.error('Error al agregar al carrito:', error);
      }
    }

    // Menú móvil
    document.addEventListener('DOMContentLoaded', function() {
      const mobileMenuBtn = document.getElementById('mobileMenuBtn');
      const mobileMenu = document.getElementById('mobileMenu');
      
      if (mobileMenuBtn && mobileMenu) {
        mobileMenuBtn.addEventListener('click', function() {
          mobileMenu.classList.toggle('hidden');
        });
      }
    });

    // Inicializar cuando el DOM esté listo
    document.addEventListener('DOMContentLoaded', function() {
      try {
        window.productCatalog = new ProductCatalog();
        
        // Inicializar estado de botones de vista
        const gridView = document.getElementById('gridView');
        const listView = document.getElementById('listView');
        
        if (gridView && listView) {
          gridView.classList.add('text-gray-600');
          listView.classList.remove('text-gray-600');
        }
        
        // Cargar estado de wishlist
        loadWishlistState();
        
        // Actualizar contadores
        updateCartCount();
        updateWishlistCount();
        
        // Agregar onclick a todos los botones "Agregar"
        document.querySelectorAll('.product-card button').forEach(button => {
          if (button.textContent.includes('Agregar')) {
            button.setAttribute('onclick', 'addToCart(this)');
          }
        });
        
        // Cambia las imágenes de productos para que tengan data-id y cursor-pointer
        document.querySelectorAll('.product-card img').forEach(function(img) {
          img.classList.add('cursor-pointer');
          var card = img.closest('.product-card');
          if (card && card.dataset.name) {
            img.setAttribute('data-id', card.dataset.name);
          }
        });
        
        // Manejo global de errores
        window.addEventListener('error', function(event) {
          console.error('Error global:', event.error);
        });
        
        // Manejo de errores de recursos
        window.addEventListener('error', function(event) {
          if (event.target.tagName === 'IMG') {
            console.warn('Error al cargar imagen:', event.target.src);
            event.target.src = 'https://via.placeholder.com/300x200?text=Imagen+no+disponible';
          }
        }, true);
        
      } catch (error) {
        console.error('Error en inicialización:', error);
      }
    });

    // --- MODAL DETALLES PRODUCTO ---
    function mostrarDetallesProductoPorId(id) {
      var card = Array.from(document.querySelectorAll('.product-card')).find(c => c.dataset.name === id);
      if (!card) return;
      var nombre = card.querySelector('h4') ? card.querySelector('h4').textContent : '';
      var descripcion = card.querySelector('p') ? card.querySelector('p').textContent : '';
      var precio = card.dataset.price ? '$' + card.dataset.price : '';
      var imagen = card.querySelector('img') ? card.querySelector('img').src : '';
      document.getElementById('modalNombre').textContent = nombre;
      document.getElementById('modalDescripcion').textContent = descripcion;
      document.getElementById('modalPrecio').textContent = 'Precio: ' + precio;
      document.getElementById('modalImg').src = imagen;
      document.getElementById('modalDetalles').classList.remove('hidden');
    }
    document.addEventListener('click', function(e) {
      if (e.target.tagName === 'IMG' && e.target.dataset.id) {
        mostrarDetallesProductoPorId(e.target.dataset.id);
      }
    });
    const cerrarModalDetalles = document.getElementById('cerrarModalDetalles');
    if (cerrarModalDetalles) {
      cerrarModalDetalles.onclick = function() {
        document.getElementById('modalDetalles').classList.add('hidden');
      }
    }
    document.getElementById('modalDetalles').addEventListener('click', function(e) {
      if (e.target === this) {
        this.classList.add('hidden');
      }
    });
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        document.getElementById('modalDetalles').classList.add('hidden');
      }
    });
    // --- FIN MODAL DETALLES PRODUCTO ---

    // --- INTEGRACIÓN DETALLE PRODUCTO ---
    function getProductDataFromCard(card) {
      return {
        name: card.dataset.name || '',
        price: card.dataset.price || '',
        image: card.querySelector('img') ? card.querySelector('img').src : '',
        brand: card.dataset.brand || '',
        type: card.dataset.type || '',
        description: card.querySelector('p') ? card.querySelector('p').textContent : '',
        oferta: card.dataset.oferta ? true : false,
        priceOriginal: card.querySelector('.line-through') ? card.querySelector('.line-through').textContent.replace(/[^0-9]/g, '') : '',
        descuento: card.querySelector('.price-badge') && card.querySelector('.price-badge').textContent.includes('%') ? card.querySelector('.price-badge').textContent.replace(/[^0-9]/g, '') : '',
        rating: card.querySelector('.text-yellow-400 + span') ? card.querySelector('.text-yellow-400 + span').textContent.replace(/[^0-9]/g, '') : '',
        caracteristicas: [] // Puedes agregar características específicas si las tienes
      };
    }

    // --- FIN INTEGRACIÓN DETALLE PRODUCTO ---

    // Función para abrir página de detalles de consolas
    function openProductDetails(productId, productName, productPrice, productImage) {
        try {
            // Redirect directly to the details page with the product ID
            const detailUrl = `consola-detalle.html?id=${productId}`;
            // Redirect to the details page
            window.location.href = detailUrl;
        } catch (error) {
            console.error('Error opening product details:', error);
        }
    }

  </script>
</body>

</html>
